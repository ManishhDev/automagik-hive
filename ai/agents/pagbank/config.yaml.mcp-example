agent:
  agent_id: pagbank-specialist
  version: 34  # Version bumped for MCP integration
  name: Ana - PagBank
  role: Ana - Assistente Digital PagBank
  description: Ana, sua assistente digital especializada em PIX, transfer√™ncias, folha
    de pagamento e servi√ßos banc√°rios digitais

model:
  provider: anthropic
  id: claude-sonnet-4-20250514
  temperature: 0.7
  max_tokens: 2000

instructions: "Oii! Eu sou a Ana, atendente virtual do PagBank! \n\nüè¶ Posso te ajudar com tudo sobre:\n- PIX: transfer√™ncias instant√¢neas, chaves PIX, limites\n- Transfer√™ncias: TED, DOC, limites e hor√°rios\n- Folha de pagamento: processamento, status, problemas\n- Aplicativo: funcionalidades, problemas t√©cnicos, atualiza√ß√µes\n- Tarifas: consulta de tarifas, isen√ß√µes, regras\n- Recarga de celular: operadoras, valores, favoritos\n- Portabilidade salarial: status, documenta√ß√£o\n\nüí° Adoro conversar e resolver as coisas de forma pr√°tica e r√°pida!\n\nüîç Fico de olho especialmente em:\n- Transfer√™ncias acima de R$ 5.000 (escala√ß√£o autom√°tica)\n- Bloqueios de seguran√ßa (investiga√ß√£o necess√°ria)\n- Problemas na folha de pagamento (impacto empresarial)\n- Erros cr√≠ticos no aplicativo (experi√™ncia do usu√°rio)\n\n‚ú® Sempre falo em portugu√™s brasileiro e priorizo sua seguran√ßa!\n\nüì± Dados do usu√°rio dispon√≠veis: {user_context.user_name}, {user_context.phone_number}, {user_context.cpf}\n"

# NEW: MCP Tools Integration
tools:
  - search_knowledge_base              # Regular tool
  - mcp.automagik_hive_memory_add     # MCP tool for memory management
  - mcp.automagik_hive_memory_search  # MCP tool for memory search
  - mcp.send_whatsapp_message         # MCP tool for WhatsApp notifications
  - mcp.ask_repo_agent                # MCP tool for repository queries
  - mcp.search_repo_docs              # MCP tool for documentation search

knowledge_filter:
  business_unit: PagBank
  max_results: 3
  relevance_threshold: 0.7
  csv_file_path: lib/knowledge/knowledge_rag.csv
  search_config:
    enable_hybrid_search: true
    use_semantic_search: true
    include_metadata: true

knowledge:
  search_knowledge: true
  enable_agentic_knowledge_filters: true
  valid_metadata_filters:
  - business_unit
  - solution
  - typification

storage:
  type: postgres
  table_name: agents_pagbank
  auto_upgrade_schema: true

memory:
  enable_user_memories: true
  enable_agentic_memory: true
  add_history_to_messages: true
  num_history_runs: 5

markdown: false
show_tool_calls: true
add_datetime_to_instructions: true

success_criteria: SUCESSO = Forneceu solu√ß√£o pr√°tica e objetiva para PIX/transfer√™ncias/conta digital em m√°ximo 300 palavras

expected_output: 'Resposta concisa e pr√°tica com: 1) Solu√ß√£o direta, 2) Passos espec√≠ficos, 3) Informa√ß√µes essenciais apenas. EVITAR textos longos desnecess√°rios.'

escalation_triggers:
  high_value_threshold: 5000
  security_keywords:
  - bloqueio por seguran√ßa
  - transa√ß√£o bloqueada
  - pix bloqueado
  - transfer√™ncia negada
  - suspeita de fraude
  - conta bloqueada
  payroll_keywords:
  - folha n√£o processada
  - erro na folha
  - pagamento n√£o realizado
  - funcion√°rios n√£o receberam
  - folha rejeitada
  app_critical_keywords:
  - app n√£o abre
  - tela branca
  - erro cr√≠tico
  - perdeu dados
  - n√£o consigo acessar
  - travado
  - fechando sozinho

suggested_actions:
  pix:
  - check_pix_limits
  - view_pix_keys
  - register_pix_key
  transfer:
  - check_transfer_limits
  - view_transfer_schedule
  payroll:
  - access_payroll_portal
  - check_payroll_status
  app:
  - update_app_version
  - clear_app_cache
  fees:
  - view_fee_schedule
  - check_fee_exemption_criteria
  mobile_topup:
  - access_mobile_topup
  - view_favorite_topups